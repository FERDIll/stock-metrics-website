<script>
async function loadIncomeStatement() {
  const url = "https://financialmodelingprep.com/stable/financials/income-statement/AAPL?apikey=YOUR_KEY";

  try {
    const response = await fetch(url);

    if (!response.ok) {
      throw new Error("Network response was not ok " + response.statusText);
    }

    const json = await response.json();

    // FMP returns an object with specific structure:
    // { symbol: "AAPL", financials: [ {...}, {...}, ... ] }

    const financials = json.financials; 
    console.log("Raw income statement data:", financials);

    // Example: extract revenue and net income for first 3 years
    const sample = financials.slice(0, 3).map(item => ({
      date: item.date,
      revenue: item["Revenue"],
      netIncome: item["Net Income"]
    }));

    console.log("Sample extracted values:", sample);

  } catch (error) {
    console.error("Error fetching income statement:", error);
  }
}

// Run fetch on page load
loadIncomeStatement();
</script>
