<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FMP AAPL Sandbox</title>
  <style>
    body {
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: #38bdf8;
      margin-bottom: 0.5rem;
    }

    h2 {
      margin-top: 1.75rem;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
    }

    .subheading {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 0.75rem;
    }

    .groups {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

.group-card {
  border-radius: 0.75rem;
  background: #0a0f1a;
  border: 1px solid rgba(30, 41, 59, 0.8); 
  padding: 0.8rem 0.9rem 0.9rem;
  transition: background 0.2s ease, border 0.2s ease;
}

.group-card:hover {
  background: #111827;                
  border-color: #38bdf8;               
}

    .group-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .group-desc {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 0.5rem;
    }

    .btn-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
    }

    .btn {
      padding: 0.25rem 0.55rem;
      background: #020617;
      border-radius: 999px;
      border: 1px solid #38bdf8;
      color: #38bdf8;
      cursor: pointer;
      font-size: 0.8rem;
      white-space: nowrap;
    }

    .btn:hover {
      background: #1e293b;
    }

    .btn-secondary {
      border-color: rgba(148, 163, 184, 0.5);
      color: #cbd5f5;
    }

    .btn-secondary:hover {
      background: #111827;
    }

    .toolbar {
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      font-size: 0.85rem;
    }

    .tag {
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      font-size: 0.78rem;
      color: #9ca3af;
    }

    #currentEndpoint {
      font-weight: 500;
      color: #e5e7eb;
    }

    #currentUrl {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      color: #9ca3af;
      word-break: break-all;
    }

    pre {
      background: #020617;
      padding: 16px;
      border-radius: 0.75rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      overflow-x: auto;
      font-size: 0.8rem;
      line-height: 1.4;
      max-height: 70vh;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
  </style>
</head>
<body>

  <h1>FMP AAPL Sandbox</h1>
  <div class="subheading">
    Click any button to fetch that dataset for <strong>AAPL</strong>.  
    Everything here is symbol-level (no macro, FX, or crypto).
  </div>

  <div class="groups">
    <!-- Core financials -->
    <section class="group-card">
      <div class="group-title">Core financial statements</div>
      <div class="group-desc">Standardized annual statements from FMP.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('income-statement')">Income statement</button>
        <button class="btn" onclick="runEndpoint('balance-sheet-statement')">Balance sheet</button>
        <button class="btn" onclick="runEndpoint('cash-flow-statement')">Cash flow</button>
        <button class="btn-secondary" onclick="runEndpoint('financial-statement-full-as-reported')">Full as-reported</button>
        <button class="btn-secondary" onclick="runEndpoint('income-statement-as-reported')">IS as-reported</button>
        <button class="btn-secondary" onclick="runEndpoint('balance-sheet-statement-as-reported')">BS as-reported</button>
        <button class="btn-secondary" onclick="runEndpoint('cash-flow-statement-as-reported')">CF as-reported</button>
      </div>
    </section>

    <!-- Growth -->
    <section class="group-card">
      <div class="group-title">Growth series</div>
      <div class="group-desc">Year-over-year growth for each statement line.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('income-statement-growth')">IS growth</button>
        <button class="btn" onclick="runEndpoint('balance-sheet-statement-growth')">BS growth</button>
        <button class="btn" onclick="runEndpoint('cash-flow-statement-growth')">CF growth</button>
        <button class="btn-secondary" onclick="runEndpoint('financial-growth')">Financial growth (combined)</button>
      </div>
    </section>

    <!-- Ratios & metrics -->
    <section class="group-card">
      <div class="group-title">Ratios & key metrics</div>
      <div class="group-desc">Pre-computed ratios, enterprise values, and scores.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('key-metrics')">Key metrics</button>
        <button class="btn" onclick="runEndpoint('key-metrics-ttm')">Key metrics TTM</button>
        <button class="btn" onclick="runEndpoint('ratios')">Ratios</button>
        <button class="btn" onclick="runEndpoint('ratios-ttm')">Ratios TTM</button>
        <button class="btn-secondary" onclick="runEndpoint('enterprise-values')">Enterprise values</button>
        <button class="btn-secondary" onclick="runEndpoint('financial-scores')">Financial scores</button>
        <button class="btn-secondary" onclick="runEndpoint('owner-earnings')">Owner earnings</button>
      </div>
    </section>

    <!-- Market & price -->
    <section class="group-card">
      <div class="group-title">Market & price</div>
      <div class="group-desc">Quote, market cap, and historical series.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('quote')">Quote</button>
        <button class="btn" onclick="runEndpoint('market-capitalization')">Market cap</button>
        <button class="btn-secondary" onclick="runEndpoint('historical-market-capitalization')">Market cap (historical)</button>
      </div>
    </section>

    <!-- Company profile & segments -->
    <section class="group-card">
      <div class="group-title">Company profile & segments</div>
      <div class="group-desc">Static company data and revenue splits.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('profile')">Profile</button>
        <button class="btn-secondary" onclick="runEndpoint('stock-peers')">Peers</button>
        <button class="btn-secondary" onclick="runEndpoint('historical-employee-count')">Employee count</button>
        <button class="btn-secondary" onclick="runEndpoint('revenue-product-segmentation')">Revenue by product</button>
        <button class="btn-secondary" onclick="runEndpoint('revenue-geographic-segmentation')">Revenue by geography</button>
      </div>
    </section>

    <!-- Filings & reports -->
    <section class="group-card">
      <div class="group-title">Filings & reports</div>
      <div class="group-desc">Report dates and JSON-parsed filings.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('financial-reports-dates')">Report dates</button>
        <button class="btn-secondary" onclick="runEndpoint('financial-reports-json')">Reports JSON (2022 FY)</button>
      </div>
    </section>

    <!-- Earnings, dividends, news -->
    <section class="group-card">
      <div class="group-title">Earnings, dividends, news</div>
      <div class="group-desc">Forward/backward-looking signals around the stock.</div>
      <div class="btn-list">
        <button class="btn" onclick="runEndpoint('earnings')">Earnings (company)</button>
        <button class="btn-secondary" onclick="runEndpoint('dividends-company')">Dividends (company)</button>
        <button class="btn-secondary" onclick="runEndpoint('analyst-estimates')">Analyst estimates</button>
        <button class="btn-secondary" onclick="runEndpoint('news-stock')">News (stock search)</button>
        <button class="btn-secondary" onclick="runEndpoint('press-releases-search')">Press releases (AAPL)</button>
      </div>
    </section>
  </div>

  <div class="toolbar">
    <span class="tag">Ticker: AAPL</span>
    <span>Last endpoint: <span id="currentEndpoint">none</span></span>
  </div>
  <div id="currentUrl"></div>

  <pre id="output"><code>Click any button above to fetch data...</code></pre>

  <script>
    // =======================
    // CONFIG
    // =======================
    const TICKER = "AAPL";
    const FMP_API_KEY = "YOUR_FMP_API_KEY"; // <-- put your key here
    const BASE = "https://financialmodelingprep.com/stable";

    // =======================
    // ENDPOINT MAP
    // =======================
    const ENDPOINTS = {
      // Core financials
      "income-statement": {
        label: "Income statement",
        url: () => `${BASE}/income-statement?symbol=${TICKER}&limit=5&apikey=${FMP_API_KEY}`
      },
      "balance-sheet-statement": {
        label: "Balance sheet statement",
        url: () => `${BASE}/balance-sheet-statement?symbol=${TICKER}&limit=5&apikey=${FMP_API_KEY}`
      },
      "cash-flow-statement": {
        label: "Cash flow statement",
        url: () => `${BASE}/cash-flow-statement?symbol=${TICKER}&limit=5&apikey=${FMP_API_KEY}`
      },
      "financial-statement-full-as-reported": {
        label: "Financial statement full (as reported)",
        url: () => `${BASE}/financial-statement-full-as-reported?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "income-statement-as-reported": {
        label: "Income statement (as reported)",
        url: () => `${BASE}/income-statement-as-reported?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "balance-sheet-statement-as-reported": {
        label: "Balance sheet (as reported)",
        url: () => `${BASE}/balance-sheet-statement-as-reported?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "cash-flow-statement-as-reported": {
        label: "Cash flow (as reported)",
        url: () => `${BASE}/cash-flow-statement-as-reported?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },

      // Growth
      "income-statement-growth": {
        label: "Income statement growth",
        url: () => `${BASE}/income-statement-growth?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "balance-sheet-statement-growth": {
        label: "Balance sheet growth",
        url: () => `${BASE}/balance-sheet-statement-growth?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "cash-flow-statement-growth": {
        label: "Cash flow growth",
        url: () => `${BASE}/cash-flow-statement-growth?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "financial-growth": {
        label: "Financial growth (combined)",
        url: () => `${BASE}/financial-growth?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },

      // Ratios & metrics
      "key-metrics": {
        label: "Key metrics",
        url: () => `${BASE}/key-metrics?symbol=${TICKER}&limit=10&apikey=${FMP_API_KEY}`
      },
      "key-metrics-ttm": {
        label: "Key metrics TTM",
        url: () => `${BASE}/key-metrics-ttm?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "ratios": {
        label: "Ratios",
        url: () => `${BASE}/ratios?symbol=${TICKER}&limit=10&apikey=${FMP_API_KEY}`
      },
      "ratios-ttm": {
        label: "Ratios TTM",
        url: () => `${BASE}/ratios-ttm?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "enterprise-values": {
        label: "Enterprise values",
        url: () => `${BASE}/enterprise-values?symbol=${TICKER}&limit=10&apikey=${FMP_API_KEY}`
      },
      "financial-scores": {
        label: "Financial scores",
        url: () => `${BASE}/financial-scores?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "owner-earnings": {
        label: "Owner earnings",
        url: () => `${BASE}/owner-earnings?symbol=${TICKER}&limit=10&apikey=${FMP_API_KEY}`
      },

      // Market & price
      "quote": {
        label: "Quote",
        url: () => `${BASE}/quote?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "market-capitalization": {
        label: "Market capitalization",
        url: () => `${BASE}/market-capitalization?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "historical-market-capitalization": {
        label: "Historical market capitalization",
        url: () => `${BASE}/historical-market-capitalization?symbol=${TICKER}&limit=30&apikey=${FMP_API_KEY}`
      },

      // Profile & segments
      "profile": {
        label: "Company profile",
        url: () => `${BASE}/profile?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "stock-peers": {
        label: "Stock peers",
        url: () => `${BASE}/stock-peers?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "historical-employee-count": {
        label: "Historical employee count",
        url: () => `${BASE}/historical-employee-count?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "revenue-product-segmentation": {
        label: "Revenue by product",
        url: () => `${BASE}/revenue-product-segmentation?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "revenue-geographic-segmentation": {
        label: "Revenue by geography",
        url: () => `${BASE}/revenue-geographic-segmentation?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },

      // Filings & reports
      "financial-reports-dates": {
        label: "Financial reports dates",
        url: () => `${BASE}/financial-reports-dates?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "financial-reports-json": {
        label: "Financial reports JSON (2022 FY)",
        url: () => `${BASE}/financial-reports-json?symbol=${TICKER}&year=2022&period=FY&apikey=${FMP_API_KEY}`
      },

      // Earnings, dividends, news, estimates
      "earnings": {
        label: "Earnings (company)",
        url: () => `${BASE}/earnings?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "dividends-company": {
        label: "Dividends (company)",
        url: () => `${BASE}/dividends-company?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "analyst-estimates": {
        label: "Analyst estimates",
        url: () => `${BASE}/analyst-estimates?symbol=${TICKER}&apikey=${FMP_API_KEY}`
      },
      "news-stock": {
        label: "News (stock search)",
        url: () => `${BASE}/news/stock?symbols=${TICKER}&limit=20&apikey=${FMP_API_KEY}`
      },
      "press-releases-search": {
        label: "Press releases (AAPL)",
        url: () => `${BASE}/news/press-releases?symbols=${TICKER}&limit=20&apikey=${FMP_API_KEY}`
      }
    };

    // =======================
    // FETCH HANDLER
    // =======================
    async function runEndpoint(key) {
      const cfg = ENDPOINTS[key];
      const outputEl = document.getElementById("output");
      const currentEndpointEl = document.getElementById("currentEndpoint");
      const currentUrlEl = document.getElementById("currentUrl");

      if (!cfg) {
        outputEl.textContent = `Unknown endpoint key: ${key}`;
        return;
      }

      const url = cfg.url();

      currentEndpointEl.textContent = cfg.label;
      currentUrlEl.textContent = url;
      outputEl.textContent = "Loading...";

      try {
        const res = await fetch(url);

        if (!res.ok) {
          outputEl.textContent = `Error: ${res.status} ${res.statusText}`;
          return;
        }

        const data = await res.json();
        outputEl.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        outputEl.textContent = "Fetch failed: " + err.message;
      }
    }
  </script>
</body>
</html>
